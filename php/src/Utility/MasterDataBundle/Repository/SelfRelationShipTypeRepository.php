<?php

namespace Utility\MasterDataBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * selfRelationShipTypeRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class SelfRelationShipTypeRepository extends EntityRepository
{
   /**
    * SelfRelation List
    * @return object array
    */
    public function getSelfRelationList($langCode, $parent_id){ 
        try{
        //object of query builder.
        $qb = $this->createQueryBuilder('c');
        $query = $qb->select('c.id, code.relationShipName as language_string')
                ->innerJoin('MasterDataBundle:SelfRelationShipTypeCodeByLang', 'code', 'WITH', 'code.relationShipCode = c.name')
                ->where('code.langCode =:langCode','c.parent=:parentId')
                ->setParameter('langCode',$langCode )
                ->setParameter('parentId',$parent_id )
                ->getQuery();
        $response = $query->getResult();
        return $response;
        }catch(\Exception $e){
            return array();
        }
    }
    
}
