<?php

namespace UserManager\Sonata\UserBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * BusinessCategoryCodeRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class BusinessCategoryCodeRepository extends EntityRepository
{
    
    /**
    * Insert Category Code List 
    * @return object array
    */
    public function InsertCategoryCodeList($datas){ 
        
        
        foreach($datas as $data){

            $details = new BusinessCategoryCode();
            
            $details->setCategoryCode($data['category_code']);
            $details->setLangCode($data['lang_code']);
            $details->setCategoryName($data['category_name']);
                        
            $em = $this->getEntityManager();

            $em->persist($details);
            
        }
                                 
        $em->flush();
        
        return true;
    }
    
    /**
    * Update Category Code List 
    * @return object array
    */
    public function UpdateCategoryCodeList($data){ 
        
       
        if($data['id']){
            $details = $this->find($data['id']);    
            if (!$details) {
                $data = array('code' => 131, 'message' => 'INVALID_DATA', 'data' => array());
                echo json_encode($data);
                exit;
            }
        } 
       
        $details->setCategoryCode($data['category_code']);
        $details->setLangCode($data['lang_code']);
        $details->setCategoryName($data['category_name']);

        $em = $this->getEntityManager();

        $em->persist($details);
                    
        $em->flush();
        
        return true;
    }
    
}
